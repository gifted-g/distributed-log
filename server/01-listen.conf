# /etc/rsyslog.d/01-listen.conf
# Listen on TCP 6514 for remote logs
module(load="imtcp")
input(type="imtcp" port="6514")

# Store logs under /var/log/remote/<host>/ with original program name
# Example paths:
#   /var/log/remote/host123/auth.log
#   /var/log/remote/host123/syslog
template(name="PerHostDir" type="string" string="/var/log/remote/%HOSTNAME%/%programname%.log")

# Write everything to per-host files
*.* ?PerHostDir
& stop
